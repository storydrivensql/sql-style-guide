

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>SQLStyleGuide Notes 0.0.1beta documentation</title>
  

  
  
  
  
    <link rel="canonical" href="https://storydrivensql.github.io/sql-style-guideindex.html"/>
  

  
  <script type="text/javascript" src="_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
        <script type="text/javascript" src="_static/jquery.js"></script>
        <script type="text/javascript" src="_static/underscore.js"></script>
        <script type="text/javascript" src="_static/doctools.js"></script>
        <script type="text/javascript" src="_static/language_data.js"></script>
    
    <script type="text/javascript" src="_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search"  style="background: white" >
          

          
            <a href="index.html#document-index" class="icon icon-home"> SQLStyleGuide Notes
          

          
          </a>

          

          

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
            
              <!-- Local TOC -->
              <div class="local-toc"><ul>
<li class="toctree-l1"><a class="reference internal" href="index.html#document-content/000-introduction">Introduction: Why?</a></li>
<li class="toctree-l1"><a class="reference internal" href="index.html#document-content/001-general-guidelines">General guidelines</a><ul>
<li class="toctree-l2"><a class="reference internal" href="index.html#be-consistent">Be consistent</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#follow-postgresql-s-strictness">Follow PostgreSQL’s strictness</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#be-explicit">Be explicit</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#ease-of-editing-is-important">Ease of editing is important</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="index.html#document-content/002-alignment/indentation">Indentation, spacing, and alignment</a><ul>
<li class="toctree-l2"><a class="reference internal" href="index.html#keyword-alignment">Keyword alignment</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="index.html#document-content/002-alignment/bracketing">Bracketing and continuation</a></li>
<li class="toctree-l1"><a class="reference internal" href="index.html#document-content/002-alignment/leading-commas">Leading commas</a><ul>
<li class="toctree-l2"><a class="reference internal" href="index.html#benefits-of-leading-commas">Benefits of leading commas</a><ul>
<li class="toctree-l3"><a class="reference internal" href="index.html#listing-columns-is-easy">Listing columns is easy</a></li>
<li class="toctree-l3"><a class="reference internal" href="index.html#easy-rearrangement-and-aliasing">Easy rearrangement and aliasing</a></li>
<li class="toctree-l3"><a class="reference internal" href="index.html#error-detection">Error detection</a></li>
<li class="toctree-l3"><a class="reference internal" href="index.html#how-leading-commas-force-consistency">How leading commas force consistency</a></li>
<li class="toctree-l3"><a class="reference internal" href="index.html#cleaning-up-compound-expressions">Cleaning up compound expressions</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="index.html#disadvantages-of-leading-commas">Disadvantages of leading commas</a><ul>
<li class="toctree-l3"><a class="reference internal" href="index.html#not-what-we-re-accustomed-to-in-normal-english">Not what we’re accustomed to in normal English</a></li>
<li class="toctree-l3"><a class="reference internal" href="index.html#most-people-don-t-do-them">Most people don’t do them</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="index.html#document-content/010-consistency/index-consistency">Consistency</a><ul>
<li class="toctree-l2"><a class="reference internal" href="index.html#document-content/010-consistency/quoting">Quoting stuff</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="index.html#document-content/042-naming-conventions/table-names">Table names</a><ul>
<li class="toctree-l2"><a class="reference internal" href="index.html#names-to-avoid">Names to avoid</a><ul>
<li class="toctree-l3"><a class="reference internal" href="index.html#avoid-using-reserved-keywords">Avoid using reserved keywords</a></li>
<li class="toctree-l3"><a class="reference internal" href="index.html#avoid-very-generic-keywords">Avoid very generic keywords</a></li>
<li class="toctree-l3"><a class="reference internal" href="index.html#avoid-ordinals-and-numerical-labels">Avoid ordinals and numerical labels</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="index.html#table-names-should-be-singular">Table names should be singular</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="index.html#document-content/255-compound-queries/index">Compound and nested queries</a></li>
<li class="toctree-l1"><a class="reference internal" href="index.html#document-content/examples/examples-index">Examples</a><ul>
<li class="toctree-l2"><a class="reference internal" href="index.html#document-content/examples/big-example">A big example</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="index.html#document-content/resources">Resources and other guides</a></li>
</ul>
</div>
            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html#document-index">SQLStyleGuide Notes</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="index.html#document-index">Docs</a> &raquo;</li>
        
      <li>SQLStyleGuide Notes 0.0.1beta documentation</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="story-driven-sql-style-guide">
<h1>Story Driven SQL Style Guide<a class="headerlink" href="#story-driven-sql-style-guide" title="Permalink to this headline">¶</a></h1>
<p>Check out this page on Github: <a class="reference external" href="https://github.com/storydrivensql/sql-style-guide">storydrivensql/sql-style-guide</a></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="index.html#document-content/000-introduction">Introduction: Why?</a></li>
<li class="toctree-l1"><a class="reference internal" href="index.html#document-content/001-general-guidelines">General guidelines</a><ul>
<li class="toctree-l2"><a class="reference internal" href="index.html#be-consistent">Be consistent</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#follow-postgresql-s-strictness">Follow PostgreSQL’s strictness</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#be-explicit">Be explicit</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#ease-of-editing-is-important">Ease of editing is important</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="index.html#document-content/002-alignment/indentation">Indentation, spacing, and alignment</a><ul>
<li class="toctree-l2"><a class="reference internal" href="index.html#keyword-alignment">Keyword alignment</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="index.html#document-content/002-alignment/bracketing">Bracketing and continuation</a></li>
<li class="toctree-l1"><a class="reference internal" href="index.html#document-content/002-alignment/leading-commas">Leading commas</a><ul>
<li class="toctree-l2"><a class="reference internal" href="index.html#benefits-of-leading-commas">Benefits of leading commas</a><ul>
<li class="toctree-l3"><a class="reference internal" href="index.html#listing-columns-is-easy">Listing columns is easy</a></li>
<li class="toctree-l3"><a class="reference internal" href="index.html#easy-rearrangement-and-aliasing">Easy rearrangement and aliasing</a></li>
<li class="toctree-l3"><a class="reference internal" href="index.html#error-detection">Error detection</a></li>
<li class="toctree-l3"><a class="reference internal" href="index.html#how-leading-commas-force-consistency">How leading commas force consistency</a></li>
<li class="toctree-l3"><a class="reference internal" href="index.html#cleaning-up-compound-expressions">Cleaning up compound expressions</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="index.html#disadvantages-of-leading-commas">Disadvantages of leading commas</a><ul>
<li class="toctree-l3"><a class="reference internal" href="index.html#not-what-we-re-accustomed-to-in-normal-english">Not what we’re accustomed to in normal English</a></li>
<li class="toctree-l3"><a class="reference internal" href="index.html#most-people-don-t-do-them">Most people don’t do them</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="index.html#document-content/010-consistency/index-consistency">Consistency</a><ul>
<li class="toctree-l2"><a class="reference internal" href="index.html#document-content/010-consistency/quoting">Quoting stuff</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="index.html#document-content/042-naming-conventions/table-names">Table names</a><ul>
<li class="toctree-l2"><a class="reference internal" href="index.html#names-to-avoid">Names to avoid</a><ul>
<li class="toctree-l3"><a class="reference internal" href="index.html#avoid-using-reserved-keywords">Avoid using reserved keywords</a></li>
<li class="toctree-l3"><a class="reference internal" href="index.html#avoid-very-generic-keywords">Avoid very generic keywords</a></li>
<li class="toctree-l3"><a class="reference internal" href="index.html#avoid-ordinals-and-numerical-labels">Avoid ordinals and numerical labels</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="index.html#table-names-should-be-singular">Table names should be singular</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="index.html#document-content/255-compound-queries/index">Compound and nested queries</a></li>
<li class="toctree-l1"><a class="reference internal" href="index.html#document-content/examples/examples-index">Examples</a><ul>
<li class="toctree-l2"><a class="reference internal" href="index.html#document-content/examples/big-example">A big example</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="index.html#document-content/resources">Resources and other guides</a></li>
</ul>
<div class="toctree-wrapper compound">
<span id="document-content/000-introduction"></span><div class="section" id="introduction-why">
<h2>Introduction: Why?<a class="headerlink" href="#introduction-why" title="Permalink to this headline">¶</a></h2>
<p>SQL has surprisingly few style guides or discussion on style, given how verbose the syntax can be, and how lenient is by convention, especially with whitespace. There are a few good guides, as mentioned in <a class="reference internal" href="index.html#document-content/resources"><span class="doc">Resources and other guides</span></a>, from which this guide takes inspiration, and makes notable differences.</p>
</div>
<span id="document-content/001-general-guidelines"></span><div class="section" id="general-guidelines">
<h2>General guidelines<a class="headerlink" href="#general-guidelines" title="Permalink to this headline">¶</a></h2>
<div class="section" id="be-consistent">
<h3>Be consistent<a class="headerlink" href="#be-consistent" title="Permalink to this headline">¶</a></h3>
<p>Always capitalize reserved keywords, such as <code class="docutils literal notranslate"><span class="pre">SELECT</span></code> and <code class="docutils literal notranslate"><span class="pre">WHERE</span></code>.</p>
</div>
<div class="section" id="follow-postgresql-s-strictness">
<h3>Follow PostgreSQL’s strictness<a class="headerlink" href="#follow-postgresql-s-strictness" title="Permalink to this headline">¶</a></h3>
<p>A common workflow is to start in SQLite and then move to PostgreSQL, a more full-featured but equally free and well-loved database. SQLite is fairly lax and lenient in what it accepts, PostgreSQL isn’t. For this guide, I’ll almost always recommend following PostgreSQL’s more strict conventions:</p>
<p><a class="reference external" href="https://wiki.postgresql.org/wiki/PostgreSQL_vs_SQL_Standard">https://wiki.postgresql.org/wiki/PostgreSQL_vs_SQL_Standard</a></p>
</div>
<div class="section" id="be-explicit">
<h3>Be explicit<a class="headerlink" href="#be-explicit" title="Permalink to this headline">¶</a></h3>
<p>When humanly feasible, write out only the fields you need to include in a <code class="docutils literal notranslate"><span class="pre">SELECT</span></code> query, rather than <code class="docutils literal notranslate"><span class="pre">SELECT</span> <span class="pre">*</span></code>.</p>
<p>Explicitly write optional syntax, such as <code class="docutils literal notranslate"><span class="pre">AS</span></code>:</p>
<p>Good:</p>
<div class="highlight-sql notranslate"><div class="highlight"><pre><span></span><span class="k">SELECT</span> <span class="n">surname</span> <span class="k">AS</span> <span class="n">last_name</span>
<span class="k">FROM</span> <span class="n">copy_of_payroll</span> <span class="k">AS</span> <span class="n">employees</span><span class="p">;</span>
</pre></div>
</div>
<p>Bad:</p>
<div class="highlight-sql notranslate"><div class="highlight"><pre><span></span><span class="k">SELECT</span> <span class="n">surname</span> <span class="n">last_name</span>
<span class="k">FROM</span> <span class="n">copy_of_payroll</span> <span class="n">employees</span><span class="p">;</span>
</pre></div>
</div>
</div>
<div class="section" id="ease-of-editing-is-important">
<h3>Ease of editing is important<a class="headerlink" href="#ease-of-editing-is-important" title="Permalink to this headline">¶</a></h3>
<p>Use leading commas.</p>
<p>Put statement-ending semicolon on its own line.</p>
</div>
</div>
<span id="document-content/002-alignment/index-alignment"></span><div class="toctree-wrapper compound">
<span id="document-content/002-alignment/indentation"></span><div class="section" id="indentation-spacing-and-alignment">
<h2>Indentation, spacing, and alignment<a class="headerlink" href="#indentation-spacing-and-alignment" title="Permalink to this headline">¶</a></h2>
<div class="section" id="keyword-alignment">
<h3>Keyword alignment<a class="headerlink" href="#keyword-alignment" title="Permalink to this headline">¶</a></h3>
<p>Main clauses, such as <code class="docutils literal notranslate"><span class="pre">SELECT</span></code> and <code class="docutils literal notranslate"><span class="pre">WHERE</span></code>, should be at the beginning of their respective lines and left-aligned.</p>
<p>Arguments should (usually) be on their own line, indented from their respective clauses.</p>
<p>Good:</p>
<div class="highlight-sql notranslate"><div class="highlight"><pre><span></span><span class="k">SELECT</span>
    <span class="n">id</span>
    <span class="p">,</span> <span class="n">name</span>
<span class="k">FROM</span>
    <span class="n">people</span>
<span class="k">WHERE</span>
    <span class="n">name</span> <span class="k">IS</span> <span class="k">NOT</span> <span class="k">NULL</span>
<span class="k">ORDER</span> <span class="k">BY</span>
    <span class="n">name</span> <span class="k">ASC</span>
<span class="k">LIMIT</span> <span class="mi">10</span>
<span class="p">;</span>
</pre></div>
</div>
<p>Bad:</p>
<div class="highlight-sql notranslate"><div class="highlight"><pre><span></span><span class="k">SELECT</span> <span class="n">id</span><span class="p">,</span> <span class="n">name</span>
<span class="k">FROM</span> <span class="n">people</span>
<span class="k">WHERE</span> <span class="n">name</span> <span class="k">IS</span> <span class="k">NOT</span> <span class="k">NULL</span>
<span class="k">ORDER</span> <span class="k">BY</span> <span class="n">name</span> <span class="k">ASC</span>
<span class="k">LIMIT</span> <span class="mi">10</span>
<span class="p">;</span>
</pre></div>
</div>
<p>Bad (IMHO): right-aligning keywords with the river, as suggested by <a class="reference external" href="https://sqlstyle.guide">sqlstyle.guide</a></p>
<div class="highlight-sql notranslate"><div class="highlight"><pre><span></span><span class="k">SELECT</span> <span class="n">id</span><span class="p">,</span> <span class="n">name</span>
  <span class="k">FROM</span> <span class="n">people</span>
 <span class="k">WHERE</span> <span class="n">name</span> <span class="k">IS</span> <span class="k">NOT</span> <span class="k">NULL</span>
 <span class="k">ORDER</span> <span class="k">BY</span> <span class="n">name</span> <span class="k">ASC</span>
 <span class="k">LIMIT</span> <span class="mi">10</span>
<span class="p">;</span>
</pre></div>
</div>
</div>
</div>
<span id="document-content/002-alignment/bracketing"></span><div class="section" id="bracketing-and-continuation">
<h2>Bracketing and continuation<a class="headerlink" href="#bracketing-and-continuation" title="Permalink to this headline">¶</a></h2>
<p>Borrowing from Python’s PEP 8 Style Guide, specifically the <a class="reference external" href="https://www.python.org/dev/peps/pep-0008/#code-lay-out">Code Layout section</a></p>
<blockquote>
<div><p>Continuation lines should align wrapped elements either vertically using Python’s implicit line joining inside parentheses, brackets and braces, or using a hanging indent [7]. When using a hanging indent the following should be considered; there should be no arguments on the first line and further indentation should be used to clearly distinguish itself as a continuation line.</p>
</div></blockquote>
<p>I like this variation:</p>
<blockquote>
<div><p>The closing brace/bracket/parenthesis on multiline constructs…may be lined up under the first character of the line that starts the multiline construct, as in:</p>
</div></blockquote>
<p>Given this:</p>
<div class="highlight-sql notranslate"><div class="highlight"><pre><span></span><span class="k">SELECT</span>
    <span class="n">id</span>
    <span class="p">,</span> <span class="n">SUBSTR</span><span class="p">(</span><span class="n">SUBSTR</span><span class="p">(</span><span class="n">last_name</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">5</span><span class="p">)</span> <span class="o">||</span> <span class="n">SUBSTR</span><span class="p">(</span><span class="n">first_name</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">10</span><span class="p">)</span> <span class="o">||</span> <span class="n">middle_name</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">7</span><span class="p">)</span>
        <span class="k">AS</span> <span class="n">messyname</span>
    <span class="p">,</span> <span class="n">age</span>
<span class="k">FROM</span> <span class="n">person</span>
<span class="p">;</span>
</pre></div>
</div>
<p>Good:</p>
<div class="highlight-sql notranslate"><div class="highlight"><pre><span></span><span class="k">SELECT</span>
    <span class="n">id</span>
    <span class="p">,</span> <span class="n">SUBSTR</span><span class="p">(</span>
        <span class="n">SUBSTR</span><span class="p">(</span><span class="n">last_name</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">5</span><span class="p">)</span>
        <span class="o">||</span> <span class="n">SUBSTR</span><span class="p">(</span><span class="n">first_name</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">10</span><span class="p">)</span>
        <span class="o">||</span> <span class="n">middle_name</span>
        <span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">7</span>
      <span class="p">)</span> <span class="k">AS</span> <span class="n">messyname</span>
    <span class="p">,</span> <span class="n">age</span>
<span class="k">FROM</span> <span class="n">person</span>
<span class="p">;</span>
</pre></div>
</div>
<p>Bad:</p>
<p>When using vertical alignment, do not put arguments on the first line:</p>
<div class="highlight-sql notranslate"><div class="highlight"><pre><span></span><span class="k">SELECT</span>
    <span class="n">id</span>
    <span class="p">,</span> <span class="n">SUBSTR</span><span class="p">(</span><span class="n">SUBSTR</span><span class="p">(</span><span class="n">last_name</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">5</span><span class="p">)</span>
        <span class="o">||</span> <span class="n">SUBSTR</span><span class="p">(</span><span class="n">first_name</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">10</span><span class="p">)</span>
        <span class="o">||</span> <span class="n">middle_name</span><span class="p">,</span>
        <span class="mi">4</span><span class="p">,</span> <span class="mi">7</span>
      <span class="p">)</span> <span class="k">AS</span> <span class="n">messyname</span>
    <span class="p">,</span> <span class="n">age</span>
<span class="k">FROM</span> <span class="n">person</span>
<span class="p">;</span>
</pre></div>
</div>
<p>OK, maybe?</p>
<p>Here, the alias lines up nicely with the other column fields.</p>
<div class="highlight-sql notranslate"><div class="highlight"><pre><span></span><span class="k">SELECT</span>
    <span class="n">id</span>
    <span class="p">,</span> <span class="n">SUBSTR</span><span class="p">(</span>
        <span class="n">SUBSTR</span><span class="p">(</span><span class="n">last_name</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">5</span><span class="p">)</span>
        <span class="o">||</span> <span class="n">SUBSTR</span><span class="p">(</span><span class="n">first_name</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">10</span><span class="p">)</span>
        <span class="o">||</span> <span class="n">middle_name</span>
        <span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">7</span><span class="p">)</span> <span class="k">AS</span>
      <span class="n">messyname</span>
    <span class="p">,</span> <span class="n">age</span>
<span class="k">FROM</span> <span class="n">person</span>
<span class="p">;</span>
</pre></div>
</div>
<p>(Not sold on the leading comma for the <code class="docutils literal notranslate"><span class="pre">SUBSTR()</span></code> arguments, e.g. <code class="docutils literal notranslate"><span class="pre">,</span> <span class="pre">4,</span> <span class="pre">7</span></code>)</p>
</div>
<span id="document-content/002-alignment/leading-commas"></span><div class="section" id="leading-commas">
<h2>Leading commas<a class="headerlink" href="#leading-commas" title="Permalink to this headline">¶</a></h2>
<p>This is likely this book’s most controversial style opinion.</p>
<p>Given a statement with a list of columns like this:</p>
<div class="highlight-sql notranslate"><div class="highlight"><pre><span></span><span class="k">SELECT</span> <span class="n">name</span><span class="p">,</span> <span class="n">age</span><span class="p">,</span> <span class="n">height</span>
<span class="k">FROM</span> <span class="n">person</span>
</pre></div>
</div>
<p>Leading commas style is:</p>
<div class="highlight-sql notranslate"><div class="highlight"><pre><span></span><span class="k">SELECT</span> <span class="n">name</span>
     <span class="p">,</span> <span class="n">age</span>
     <span class="p">,</span> <span class="n">height</span>
<span class="k">FROM</span> <span class="n">person</span>
</pre></div>
</div>
<p>The standard style is:</p>
<div class="highlight-sql notranslate"><div class="highlight"><pre><span></span><span class="k">SELECT</span> <span class="n">name</span>
     <span class="p">,</span> <span class="n">age</span>
     <span class="p">,</span> <span class="n">height</span>
<span class="k">FROM</span> <span class="n">person</span>
</pre></div>
</div>
<p>Instead of placing commas between terms, as we do in normal English (and many programming languages), I advocate to put the commas <em>before</em></p>
<div class="section" id="benefits-of-leading-commas">
<h3>Benefits of leading commas<a class="headerlink" href="#benefits-of-leading-commas" title="Permalink to this headline">¶</a></h3>
<div class="section" id="listing-columns-is-easy">
<h4>Listing columns is easy<a class="headerlink" href="#listing-columns-is-easy" title="Permalink to this headline">¶</a></h4>
<p>Early on in this guide, I argued that you should avoid selecting columns you don’t need. Of course, the main reason why we over-select is because this:</p>
<div class="highlight-sql notranslate"><div class="highlight"><pre><span></span><span class="k">SELECT</span> <span class="o">*</span>
<span class="k">FROM</span> <span class="k">data</span><span class="p">;</span>
</pre></div>
</div>
<p>Is so much easier than writing out each column name:</p>
<div class="highlight-sql notranslate"><div class="highlight"><pre><span></span><span class="k">SELECT</span> <span class="n">apple</span><span class="p">,</span> <span class="n">banana</span><span class="p">,</span> <span class="n">chowder</span>
       <span class="n">dog</span><span class="p">,</span> <span class="n">elephant</span><span class="p">,</span>
<span class="k">FROM</span> <span class="k">data</span><span class="p">;</span>
</pre></div>
</div>
<p>Nevermind doing this and avoiding syntax errors — did you notice the erroneous trailing comma after <code class="docutils literal notranslate"><span class="pre">elephant</span></code>, and the missing comma after <code class="docutils literal notranslate"><span class="pre">choswer</span></code>?</p>
<p>One way to avoid syntax errors when listing the columns is to put one column on each line. Which is still <em>work</em>, but it’s cleaner. I like to list and align all the column names <em>before</em> adding commas. Given the following SQL below:</p>
<div class="highlight-sql notranslate"><div class="highlight"><pre><span></span><span class="k">SELECT</span>
  <span class="n">apple</span>
  <span class="n">banana</span>
  <span class="n">chowder</span>
  <span class="n">dog</span>
  <span class="n">elephant</span>
<span class="k">FROM</span> <span class="k">data</span><span class="p">;</span>
</pre></div>
</div>
<p>I find it much faster to add a leading comma to each line, since it’s always in the same column for each row:</p>
<div class="highlight-sql notranslate"><div class="highlight"><pre><span></span><span class="k">SELECT</span>
  <span class="n">apple</span>
  <span class="p">,</span> <span class="n">banana</span>
  <span class="p">,</span> <span class="n">chowder</span>
  <span class="p">,</span> <span class="n">dog</span>
  <span class="p">,</span> <span class="n">elephant</span>
<span class="k">FROM</span> <span class="k">data</span><span class="p">;</span>
</pre></div>
</div>
<p>Whereas with the trailing-comma style, each line has a different length, and thus, differently aligned line-end positions. It’s not as easy to navigate from line-end to line-end:</p>
<div class="highlight-sql notranslate"><div class="highlight"><pre><span></span><span class="k">SELECT</span>
  <span class="n">apple</span><span class="p">,</span>
  <span class="n">banana</span><span class="p">,</span>
  <span class="n">chowder</span><span class="p">,</span>
  <span class="n">dog</span><span class="p">,</span>
  <span class="n">elephant</span>
<span class="k">FROM</span> <span class="k">data</span><span class="p">;</span>
</pre></div>
</div>
</div>
<div class="section" id="easy-rearrangement-and-aliasing">
<h4>Easy rearrangement and aliasing<a class="headerlink" href="#easy-rearrangement-and-aliasing" title="Permalink to this headline">¶</a></h4>
<p>Given this:</p>
<div class="highlight-sql notranslate"><div class="highlight"><pre><span></span><span class="k">SELECT</span>
  <span class="n">firstname</span><span class="p">,</span>
  <span class="n">mi</span><span class="p">,</span>
  <span class="n">lastname</span><span class="p">,</span>
  <span class="mi">10</span> <span class="o">*</span> <span class="n">ROUND</span><span class="p">(</span><span class="n">age</span> <span class="o">/</span> <span class="mi">10</span><span class="p">.</span><span class="mi">0</span><span class="p">),</span>
  <span class="n">country</span>
<span class="k">FROM</span> <span class="n">person</span><span class="p">;</span>
</pre></div>
</div>
<p>How fast can you rearrange the column order?</p>
<div class="highlight-sql notranslate"><div class="highlight"><pre><span></span><span class="k">SELECT</span>
  <span class="n">country</span><span class="p">,</span>
  <span class="mi">10</span> <span class="o">*</span> <span class="n">ROUND</span><span class="p">(</span><span class="n">age</span> <span class="o">/</span> <span class="mi">10</span><span class="p">.</span><span class="mi">0</span><span class="p">),</span>
  <span class="n">lastname</span><span class="p">,</span>
  <span class="n">firstname</span><span class="p">,</span>
  <span class="n">mi</span>
<span class="k">FROM</span> <span class="n">person</span><span class="p">;</span>
</pre></div>
</div>
<p>How fast can you alias the columns, then rearrange them?</p>
<div class="highlight-sql notranslate"><div class="highlight"><pre><span></span><span class="k">SELECT</span>
  <span class="n">country</span><span class="p">,</span>
  <span class="mi">10</span> <span class="o">*</span> <span class="n">ROUND</span><span class="p">(</span><span class="n">age</span> <span class="o">/</span> <span class="mi">10</span><span class="p">.</span><span class="mi">0</span><span class="p">)</span> <span class="k">AS</span> <span class="n">nearest_decade</span><span class="p">,</span>
  <span class="n">lastname</span> <span class="k">AS</span> <span class="n">last_name</span><span class="p">,</span>
  <span class="n">firstname</span> <span class="k">AS</span> <span class="n">first_name</span><span class="p">,</span>
  <span class="n">mi</span> <span class="k">AS</span> <span class="n">middle_initial</span>
<span class="k">FROM</span> <span class="n">person</span><span class="p">;</span>
</pre></div>
</div>
<p>Now try it with leading commas:</p>
<div class="highlight-sql notranslate"><div class="highlight"><pre><span></span><span class="k">SELECT</span>
  <span class="n">firstname</span><span class="p">,</span>
  <span class="p">,</span> <span class="n">mi</span>
  <span class="p">,</span> <span class="n">lastname</span>
  <span class="p">,</span> <span class="mi">10</span> <span class="o">*</span> <span class="n">ROUND</span><span class="p">(</span><span class="n">age</span> <span class="o">/</span> <span class="mi">10</span><span class="p">.</span><span class="mi">0</span><span class="p">)</span>
  <span class="p">,</span> <span class="n">country</span>
<span class="k">FROM</span> <span class="n">person</span><span class="p">;</span>
</pre></div>
</div>
</div>
<div class="section" id="error-detection">
<h4>Error detection<a class="headerlink" href="#error-detection" title="Permalink to this headline">¶</a></h4>
<p>As I’ve said before, we spend more time reading code than writing it. And often times, we’re reading code in order to debug it.</p>
<p>Try to find the syntax error(s) in this SQL statement that uses the standard style of commas:</p>
<div class="highlight-sql notranslate"><div class="highlight"><pre><span></span><span class="k">SELECT</span>
      <span class="n">customer</span><span class="p">.</span><span class="n">id</span> <span class="k">AS</span> <span class="n">customer_id</span><span class="p">,</span>
      <span class="p">(</span><span class="n">customer</span><span class="p">.</span><span class="n">last_name</span> <span class="o">||</span> <span class="s1">&#39;, &#39;</span> <span class="o">||</span> <span class="n">customer</span><span class="p">.</span><span class="n">first_name</span><span class="p">)</span>
        <span class="k">AS</span> <span class="n">customer_full_name</span><span class="p">,</span>
      <span class="n">invoice</span><span class="p">.</span><span class="n">date_signed</span> <span class="k">AS</span> <span class="n">invoice_date</span>
      <span class="n">ROUND</span><span class="p">(</span><span class="n">invoice</span><span class="p">.</span><span class="n">amount</span> <span class="o">/</span> <span class="mi">1000</span><span class="p">.</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span> <span class="k">AS</span> <span class="n">amount_due_in_thousands</span><span class="p">,</span>
      <span class="n">invoice</span><span class="p">.</span><span class="n">manager_name</span> <span class="k">AS</span> <span class="n">manager</span>
<span class="k">FROM</span> <span class="n">customer</span>
<span class="k">INNER</span> <span class="k">JOIN</span> <span class="n">invoice</span> <span class="k">ON</span>
    <span class="n">customer</span><span class="p">.</span><span class="n">id</span> <span class="o">=</span> <span class="n">invoice</span><span class="p">.</span><span class="n">customer_id</span>
<span class="k">ORDER</span> <span class="k">BY</span>
    <span class="n">customer_full_name</span> <span class="k">ASC</span>
    <span class="n">invoice_date</span> <span class="k">DESC</span><span class="p">,</span>
    <span class="n">amount_due_in_thousands</span><span class="p">,</span> <span class="k">DESC</span>
<span class="p">;</span>
</pre></div>
</div>
<p>Notice how much more the missing commas stick out when we expect them to lead each line:</p>
<div class="highlight-sql notranslate"><div class="highlight"><pre><span></span><span class="k">SELECT</span>
      <span class="n">customer</span><span class="p">.</span><span class="n">id</span> <span class="k">AS</span> <span class="n">customer_id</span>
    <span class="p">,</span> <span class="p">(</span><span class="n">customer</span><span class="p">.</span><span class="n">last_name</span> <span class="o">||</span> <span class="s1">&#39;, &#39;</span> <span class="o">||</span> <span class="n">customer</span><span class="p">.</span><span class="n">first_name</span><span class="p">)</span>
        <span class="k">AS</span> <span class="n">customer_full_name</span>
    <span class="p">,</span> <span class="n">invoice</span><span class="p">.</span><span class="n">date_signed</span> <span class="k">AS</span> <span class="n">invoice_date</span>
      <span class="n">ROUND</span><span class="p">(</span><span class="n">invoice</span><span class="p">.</span><span class="n">amount</span> <span class="o">/</span> <span class="mi">1000</span><span class="p">.</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span> <span class="k">AS</span> <span class="n">amount_due_in_thousands</span>
    <span class="p">,</span>  <span class="n">invoice</span><span class="p">.</span><span class="n">manager_name</span> <span class="k">AS</span> <span class="n">manager</span>
<span class="k">FROM</span> <span class="n">customer</span>
<span class="k">INNER</span> <span class="k">JOIN</span> <span class="n">invoice</span> <span class="k">ON</span>
    <span class="n">customer</span><span class="p">.</span><span class="n">id</span> <span class="o">=</span> <span class="n">invoice</span><span class="p">.</span><span class="n">customer_id</span>
<span class="k">ORDER</span> <span class="k">BY</span>
    <span class="n">customer_full_name</span> <span class="k">ASC</span>
      <span class="n">invoice_date</span> <span class="k">DESC</span>
    <span class="p">,</span> <span class="n">amount_due_in_thousands</span><span class="p">,</span> <span class="k">DESC</span>
<span class="p">;</span>
</pre></div>
</div>
<p>BTW here’s the fixed version:</p>
<div class="highlight-sql notranslate"><div class="highlight"><pre><span></span><span class="k">SELECT</span>
      <span class="n">customer</span><span class="p">.</span><span class="n">id</span> <span class="k">AS</span> <span class="n">customer_id</span>
    <span class="p">,</span> <span class="p">(</span><span class="n">customer</span><span class="p">.</span><span class="n">last_name</span> <span class="o">||</span> <span class="s1">&#39;, &#39;</span> <span class="o">||</span> <span class="n">customer</span><span class="p">.</span><span class="n">first_name</span><span class="p">)</span>
        <span class="k">AS</span> <span class="n">customer_full_name</span>
    <span class="p">,</span> <span class="n">invoice</span><span class="p">.</span><span class="n">date_signed</span> <span class="k">AS</span> <span class="n">invoice_date</span>
      <span class="n">ROUND</span><span class="p">(</span><span class="n">invoice</span><span class="p">.</span><span class="n">amount</span> <span class="o">/</span> <span class="mi">1000</span><span class="p">.</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span> <span class="k">AS</span> <span class="n">amount_due_in_thousands</span>
    <span class="p">,</span>  <span class="n">invoice</span><span class="p">.</span><span class="n">manager_name</span> <span class="k">AS</span> <span class="n">manager</span>
<span class="k">FROM</span> <span class="n">customer</span>
<span class="k">INNER</span> <span class="k">JOIN</span> <span class="n">invoice</span> <span class="k">ON</span>
    <span class="n">customer</span><span class="p">.</span><span class="n">id</span> <span class="o">=</span> <span class="n">invoice</span><span class="p">.</span><span class="n">customer_id</span>
<span class="k">ORDER</span> <span class="k">BY</span>
    <span class="n">customer_full_name</span> <span class="k">ASC</span>
    <span class="p">,</span> <span class="n">invoice_date</span> <span class="k">DESC</span>
    <span class="p">,</span> <span class="n">amount_due_in_thousands</span> <span class="k">DESC</span>
<span class="p">;</span>
</pre></div>
</div>
</div>
<div class="section" id="how-leading-commas-force-consistency">
<h4>How leading commas force consistency<a class="headerlink" href="#how-leading-commas-force-consistency" title="Permalink to this headline">¶</a></h4>
<p>Each leading comma denotes exactly one argument per line:</p>
<div class="highlight-sql notranslate"><div class="highlight"><pre><span></span><span class="k">SELECT</span>
  <span class="n">id</span>
  <span class="p">,</span> <span class="n">name</span>
  <span class="p">,</span> <span class="n">age</span>
  <span class="p">,</span> <span class="n">country</span>
  <span class="p">,</span> <span class="n">favorite_philosophical_saying</span>
<span class="k">FROM</span> <span class="n">person</span>
<span class="p">;</span>
</pre></div>
</div>
<p>This (somewhat) dissuades us from piling on short arguments when possible:</p>
<div class="highlight-sql notranslate"><div class="highlight"><pre><span></span><span class="k">SELECT</span>
  <span class="n">id</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">age</span>
  <span class="p">,</span> <span class="n">country</span><span class="p">,</span> <span class="n">favorite_philosophical_saying</span><span class="p">,</span>
<span class="k">FROM</span> <span class="n">person</span>
<span class="p">;</span>
</pre></div>
</div>
<p>When using trailing commas, it is arguably more natural to act less consistently here:</p>
<div class="highlight-sql notranslate"><div class="highlight"><pre><span></span><span class="k">SELECT</span>
  <span class="n">id</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">age</span><span class="p">,</span>
  <span class="n">country</span><span class="p">,</span> <span class="n">favorite_philosophical_saying</span>
<span class="k">FROM</span> <span class="n">person</span>
<span class="p">;</span>
</pre></div>
</div>
<p>Doing it with leading commas feels decidedly less natural.</p>
<div class="highlight-sql notranslate"><div class="highlight"><pre><span></span><span class="k">SELECT</span>
  <span class="n">id</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">age</span>
  <span class="p">,</span> <span class="n">country</span><span class="p">,</span> <span class="n">favorite_philosophical_saying</span>
<span class="k">FROM</span> <span class="n">person</span>
<span class="p">;</span>
</pre></div>
</div>
<p>And it much more obviously looks awry and disjoint. Below, I emphasize how the  misaligned commas at the start of lines 2 and 3 really stand out:</p>
<div class="highlight-sql notranslate"><div class="highlight"><pre><span></span><span class="n">id</span><span class="p">,</span> <span class="n">name</span>
<span class="p">,</span> <span class="n">country</span><span class="p">,</span>
</pre></div>
</div>
</div>
<div class="section" id="cleaning-up-compound-expressions">
<h4>Cleaning up compound expressions<a class="headerlink" href="#cleaning-up-compound-expressions" title="Permalink to this headline">¶</a></h4>
<div class="highlight-sql notranslate"><div class="highlight"><pre><span></span><span class="k">SELECT</span>
    <span class="n">id</span>
    <span class="p">,</span> <span class="nb">date</span>
    <span class="p">,</span> <span class="p">(</span><span class="n">last_name</span> <span class="o">||</span> <span class="s1">&#39;, &#39;</span> <span class="o">||</span> <span class="n">first_name</span> <span class="o">||</span> <span class="s1">&#39;,&#39;</span>
      <span class="o">||</span> <span class="n">zipcode</span><span class="p">)</span> <span class="k">AS</span> <span class="n">customer_info</span>
    <span class="p">,</span> <span class="n">amount</span>
<span class="k">FROM</span> <span class="n">invoice</span><span class="p">;</span>
</pre></div>
</div>
<p>versus:</p>
<div class="highlight-sql notranslate"><div class="highlight"><pre><span></span><span class="k">SELECT</span>
    <span class="n">id</span><span class="p">,</span>
    <span class="nb">date</span><span class="p">,</span>
    <span class="p">(</span><span class="n">last_name</span> <span class="o">||</span> <span class="s1">&#39;, &#39;</span> <span class="o">||</span> <span class="n">first_name</span> <span class="o">||</span> <span class="s1">&#39;,&#39;</span>
       <span class="o">||</span> <span class="n">zipcode</span><span class="p">)</span>
       <span class="k">AS</span> <span class="n">customer_info</span><span class="p">,</span>
    <span class="n">amount</span>
<span class="k">FROM</span> <span class="n">invoice</span><span class="p">;</span>
</pre></div>
</div>
<p>(need a better example of this)</p>
</div>
</div>
<div class="section" id="disadvantages-of-leading-commas">
<h3>Disadvantages of leading commas<a class="headerlink" href="#disadvantages-of-leading-commas" title="Permalink to this headline">¶</a></h3>
<div class="section" id="not-what-we-re-accustomed-to-in-normal-english">
<h4>Not what we’re accustomed to in normal English<a class="headerlink" href="#not-what-we-re-accustomed-to-in-normal-english" title="Permalink to this headline">¶</a></h4>
</div>
<div class="section" id="most-people-don-t-do-them">
<h4>Most people don’t do them<a class="headerlink" href="#most-people-don-t-do-them" title="Permalink to this headline">¶</a></h4>
<p>Great research by Felipe Hoffa:</p>
<p><a class="reference external" href="https://towardsdatascience.com/winning-arguments-with-data-leading-with-commas-in-sql-672b3b81eac9">Leading with commas — ugly or efficient? An investigation over 320 GB of SQL code</a></p>
</div>
</div>
</div>
</div>
<span id="document-content/010-consistency/index-consistency"></span><div class="section" id="consistency">
<h2>Consistency<a class="headerlink" href="#consistency" title="Permalink to this headline">¶</a></h2>
<p>Rules we care about:</p>
<ul class="simple">
<li><p>Follow conventions that enable — or even <em>compel</em> — consistency</p></li>
<li><p>Be consistent when possible</p></li>
<li><p>…but not in a way that makes life harder, especially when working as a team</p></li>
</ul>
<p>TKTK:</p>
<p>To quote from the Python PEP 8 Style Guide, under the section, <a class="reference external" href="https://www.python.org/dev/peps/pep-0008/#a-foolish-consistency-is-the-hobgoblin-of-little-minds">A Foolish Consistency is the Hobgoblin of Little Minds</a>:</p>
<blockquote>
<div><p>…A style guide is about consistency. Consistency with this style guide is important. Consistency within a project is more important. Consistency within one module or function is the most important.</p>
</div></blockquote>
<p>This section deals with syntax that is open to “artistic” interpretation, i.e. the SQL interpreter doesn’t care what it looks like, but humans might.</p>
<p>TKTK</p>
<div class="toctree-wrapper compound">
<span id="document-content/010-consistency/quoting"></span><div class="section" id="quoting-stuff">
<h3>Quoting stuff<a class="headerlink" href="#quoting-stuff" title="Permalink to this headline">¶</a></h3>
<p>(optional or no)</p>
<p>SQLite is a flexible, friendly language, in that it will treat the following quoting conventions as equal, when it comes to a table named <code class="docutils literal notranslate"><span class="pre">person</span></code>:</p>
<ul class="simple">
<li><p>SELECT name FROM “person”;</p></li>
<li><p>SELECT name FROM [person]</p></li>
<li><p>SELECT name FROM <cite>person</cite></p></li>
</ul>
<p>However, since it’s best to be consistent, and to make it convenient to someday migrate to PostgreSQL, I highly recommend sticking with PostgreSQL’s convention</p>
</div>
</div>
</div>
<span id="document-content/042-naming-conventions/index"></span><div class="toctree-wrapper compound">
<span id="document-content/042-naming-conventions/table-names"></span><div class="section" id="table-names">
<h2>Table names<a class="headerlink" href="#table-names" title="Permalink to this headline">¶</a></h2>
<div class="section" id="names-to-avoid">
<h3>Names to avoid<a class="headerlink" href="#names-to-avoid" title="Permalink to this headline">¶</a></h3>
<p>Easiest to start with things not to do.</p>
<div class="section" id="avoid-using-reserved-keywords">
<h4>Avoid using reserved keywords<a class="headerlink" href="#avoid-using-reserved-keywords" title="Permalink to this headline">¶</a></h4>
<p>e.g. user, table</p>
</div>
<div class="section" id="avoid-very-generic-keywords">
<h4>Avoid very generic keywords<a class="headerlink" href="#avoid-very-generic-keywords" title="Permalink to this headline">¶</a></h4>
</div>
<div class="section" id="avoid-ordinals-and-numerical-labels">
<h4>Avoid ordinals and numerical labels<a class="headerlink" href="#avoid-ordinals-and-numerical-labels" title="Permalink to this headline">¶</a></h4>
<p>e.g. if you have a table named <code class="docutils literal notranslate"><span class="pre">first_friend</span></code> and <code class="docutils literal notranslate"><span class="pre">second_friend</span></code>, is there a reason why you simply don’t have a single table, <code class="docutils literal notranslate"><span class="pre">friend</span></code>?</p>
</div>
</div>
<div class="section" id="table-names-should-be-singular">
<h3>Table names should be singular<a class="headerlink" href="#table-names-should-be-singular" title="Permalink to this headline">¶</a></h3>
<p>In most real world situations, you will be constrained by the language framework. For example, Rails by convention expects the <code class="docutils literal notranslate"><span class="pre">Person</span></code> and <code class="docutils literal notranslate"><span class="pre">Apple</span></code> data objects to have corresponding tables named in snakecase plural, e.g. <code class="docutils literal notranslate"><span class="pre">people</span></code> and <code class="docutils literal notranslate"><span class="pre">apples</span></code>.</p>
<p>Great discussion here: <a class="reference external" href="https://stackoverflow.com/questions/338156/table-naming-dilemma-singular-vs-plural-names">https://stackoverflow.com/questions/338156/table-naming-dilemma-singular-vs-plural-names</a></p>
<p>However, when you have the choice to name things what you want, I recommend using <strong>singular</strong> over <strong>plural</strong> names, by a very slim margin of benefit. Mostly, <em>singular</em> is more <em>consistent</em>:</p>
<ul class="simple">
<li><p>For non-English speakers, nouns with irregular plurals can be very difficult, e.g. <code class="docutils literal notranslate"><span class="pre">cacti</span></code>, <code class="docutils literal notranslate"><span class="pre">attorneys_general</span></code>, <code class="docutils literal notranslate"><span class="pre">data</span></code>, <code class="docutils literal notranslate"><span class="pre">people</span></code>.</p></li>
<li><p>For some nouns, plural and</p></li>
<li><p>Singular nouns make for easier reading and consistency when you have related concepts across tables. For example, it’s very easy to derive <code class="docutils literal notranslate"><span class="pre">invoice_detail</span></code> with <code class="docutils literal notranslate"><span class="pre">invoice</span></code>. But with <code class="docutils literal notranslate"><span class="pre">invoices</span></code>, it’s a little more effort to divine the name <code class="docutils literal notranslate"><span class="pre">invoice_details</span></code> — as opposed to, say, <code class="docutils literal notranslate"><span class="pre">invoices_detail</span></code> or <code class="docutils literal notranslate"><span class="pre">invoices_details</span></code>.</p></li>
</ul>
<p>There are some arguable aesthetic advantages too:</p>
<div class="highlight-sql notranslate"><div class="highlight"><pre><span></span><span class="k">SELECT</span> <span class="n">attorney_general</span><span class="p">.</span><span class="n">name</span><span class="p">,</span> <span class="n">attorney_general</span><span class="p">.</span><span class="n">age</span>
<span class="k">FROM</span> <span class="n">attorney_general</span><span class="p">;</span>
</pre></div>
</div>
<p>versus:</p>
<div class="highlight-sql notranslate"><div class="highlight"><pre><span></span><span class="k">SELECT</span> <span class="n">attorney_generals</span><span class="p">.</span><span class="n">name</span><span class="p">,</span> <span class="n">attorney_generals</span><span class="p">.</span><span class="n">age</span>
<span class="k">FROM</span> <span class="n">attorneys_general</span><span class="p">;</span>
</pre></div>
</div>
<p>And:</p>
<div class="highlight-sql notranslate"><div class="highlight"><pre><span></span><span class="k">SELECT</span> <span class="n">invoice</span><span class="p">.</span><span class="n">customer_id</span>
<span class="k">FROM</span> <span class="n">invoice</span><span class="p">;</span>

<span class="n">TKTK</span>
</pre></div>
</div>
</div>
</div>
</div>
<span id="document-content/255-compound-queries/index"></span><div class="section" id="compound-and-nested-queries">
<h2>Compound and nested queries<a class="headerlink" href="#compound-and-nested-queries" title="Permalink to this headline">¶</a></h2>
<p>Zen of Python: <a class="reference external" href="https://www.python.org/dev/peps/pep-0020/">https://www.python.org/dev/peps/pep-0020/</a></p>
<blockquote>
<div><p>Flat is better than nested</p>
</div></blockquote>
</div>
<span id="document-content/examples/examples-index"></span><div class="section" id="examples">
<h2>Examples<a class="headerlink" href="#examples" title="Permalink to this headline">¶</a></h2>
<div class="toctree-wrapper compound">
<span id="document-content/examples/big-example"></span><div class="section" id="a-big-example">
<h3>A big example<a class="headerlink" href="#a-big-example" title="Permalink to this headline">¶</a></h3>
<p>here’s a longform but not too complicated example:</p>
<div class="highlight-sql notranslate"><div class="highlight"><pre><span></span><span class="k">WITH</span> <span class="n">bills</span> <span class="k">AS</span> <span class="p">(</span>
    <span class="k">SELECT</span>
        <span class="n">first_name</span>
        <span class="p">,</span> <span class="n">last_name</span>
        <span class="p">,</span> <span class="k">SUM</span><span class="p">(</span><span class="n">price</span><span class="p">)</span> <span class="k">AS</span> <span class="n">outstanding</span>
    <span class="k">FROM</span> <span class="n">purchases</span>
    <span class="k">GROUP</span> <span class="k">BY</span>
        <span class="n">customer_id</span>
<span class="p">)</span>

<span class="k">SELECT</span>
    <span class="n">customers</span><span class="p">.</span><span class="n">id</span> <span class="k">AS</span> <span class="n">customer_id</span>
    <span class="p">,</span> <span class="n">customers</span><span class="p">.</span><span class="n">first_name</span>
    <span class="p">,</span> <span class="n">customers</span><span class="p">.</span><span class="n">last_name</span>
    <span class="p">,</span> <span class="n">bills</span><span class="p">.</span><span class="n">outstanding</span>
<span class="k">FROM</span>
    <span class="n">db_customers_alltbl</span> <span class="k">AS</span> <span class="n">customers</span>
<span class="k">INNER</span> <span class="k">JOIN</span>
    <span class="n">bills</span> <span class="k">USING</span><span class="p">(</span><span class="n">first_name</span><span class="p">,</span> <span class="n">last_name</span><span class="p">)</span>
<span class="k">WHERE</span>
    <span class="n">customers</span><span class="p">.</span><span class="n">activation_date</span> <span class="o">&gt;</span> <span class="s1">&#39;1999&#39;</span>
    <span class="k">AND</span> <span class="n">bills</span><span class="p">.</span><span class="n">outstanding</span> <span class="o">&gt;</span> <span class="mi">0</span>
    <span class="k">AND</span> <span class="n">customer_id</span> <span class="k">IS</span> <span class="k">NOT</span> <span class="k">NULL</span>
<span class="k">ORDER</span> <span class="k">BY</span>
    <span class="n">outstanding</span> <span class="k">DESC</span>
    <span class="p">,</span> <span class="n">customers</span><span class="p">.</span><span class="n">last_name</span> <span class="k">ASC</span>
    <span class="p">,</span> <span class="n">customers</span><span class="p">.</span><span class="n">first_name</span> <span class="k">ASC</span>
<span class="k">LIMIT</span> <span class="mi">10</span>
<span class="p">;</span>
</pre></div>
</div>
<p>Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod
tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam,
quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo
consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse
cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non
proident, sunt in culpa qui officia deserunt mollit anim id est laborum.</p>
</div>
</div>
</div>
<span id="document-content/resources"></span><div class="section" id="resources-and-other-guides">
<h2>Resources and other guides<a class="headerlink" href="#resources-and-other-guides" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><p><a class="reference external" href="https://www.python.org/dev/peps/pep-0020/">The Zen of Python</a></p></li>
<li><p><a class="reference external" href="https://about.gitlab.com/handbook/business-ops/data-team/sql-style-guide/">Gitlab’s SQL Style Guide</a></p></li>
<li><p><a class="reference external" href="https://gist.github.com/fredbenenson/7bb92718e19138c20591">Kickstarter’s SQL Style Guide, via Fred Benenson</a></p></li>
<li><p><a class="reference external" href="https://docs.telemetry.mozilla.org/concepts/sql_style.html">Firefox Data Documentation SQL Style Guide</a></p></li>
<li><p><a class="reference external" href="https://www.sqlstyle.guide/">Simon Holywell’s SQL Style Guide</a></p></li>
</ul>
</div>
</div>
</div>


           </div>
           
          </div>
          <footer>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2019, Dan Nguyen

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>